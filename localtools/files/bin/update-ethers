#!/bin/sh
# $Id: update-ethers,v 1.1 2005/06/21 20:21:40 abs Exp $

DOMAIN=$(nslookup localhost|awk '{if($1 == "Name:"){sub("localhost","");print $2}}')

awk '$4=="hardware"{gsub(";","");print $6"\t"$3"'$DOMAIN'"}' /etc/dhcpd.conf \
	> /etc/ethers.tmp
if diff -u /etc/ethers /etc/ethers.tmp ; then
    echo "No change"
    rm /etc/ethers.tmp
else
    mv /etc/ethers.tmp /etc/ethers
fi
